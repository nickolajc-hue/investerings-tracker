<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Investerings-tracker</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}
.container {
  max-width: 900px;
  margin: auto;
}
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
  margin-bottom: 20px;
}
.card {
  background: white;
  padding: 16px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
input, button {
  width: 100%;
  padding: 8px;
  margin: 5px 0;
}
button {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
}
table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  padding: 8px;
  border-bottom: 1px solid #ddd;
  text-align: right;
}
th:first-child, td:first-child {
  text-align: left;
}
.positive { color: green; }
.negative { color: red; }
</style>
</head>

<body>
<div class="container">

<h1>üìä Investerings-dashboard</h1>

<div class="cards">
  <div class="card">Investeret<br><b id="invested">0 kr</b></div>
  <div class="card">V√¶rdi<br><b id="value">0 kr</b></div>
  <div class="card">Afkast<br><b id="profit">0 kr</b></div>
  <div class="card">Afkast %<br><b id="profitPct">0%</b></div>
</div>

<div class="card">
<h2>‚ûï Tilf√∏j investering</h2>
<input id="name" placeholder="Aktiv">
<input id="quantity" type="number" placeholder="Antal">
<input id="buyPrice" type="number" placeholder="K√∏bspris">
<input id="currentPrice" type="number" placeholder="Nuv√¶rende pris">
<input id="targetPct" type="number" placeholder="M√•l %">
<button onclick="addInvestment()">Tilf√∏j</button>
</div>

<div class="card" style="margin-top:20px">
<h2>üìÅ Allokering</h2>
<table>
<thead>
<tr>
<th>Aktiv</th>
<th>V√¶rdi</th>
<th>Nuv %</th>
<th>M√•l %</th>
<th>Just√©r</th>
</tr>
</thead>
<tbody id="table"></tbody>
</table>
</div>

</div>

<script>
let investments = JSON.parse(localStorage.getItem("investments")) || [];

function save() {
  localStorage.setItem("investments", JSON.stringify(investments));
}

function addInvestment() {
  const i = {
    name: name.value,
    quantity: +quantity.value,
    buyPrice: +buyPrice.value,
    currentPrice: +currentPrice.value,
    targetPct: +targetPct.value
  };
  if (!i.name) return;
  investments.push(i);
  save();
  render();
}

function render() {
  let invested = 0;
  let value = 0;

  investments.forEach(i => {
    invested += i.quantity * i.buyPrice;
    value += i.quantity * i.currentPrice;
  });

  const profit = value - invested;
  const profitPct = invested ? profit / invested * 100 : 0;

  investedEl.textContent = invested.toFixed(0) + " kr";
  valueEl.textContent = value.toFixed(0) + " kr";
  profitEl.textContent = profit.toFixed(0) + " kr";
  profitPctEl.textContent = profitPct.toFixed(2) + "%";

  table.innerHTML = "";

  investments.forEach(i => {
    const currentValue = i.quantity * i.currentPrice;
    const currentPct = value ? currentValue / value * 100 : 0;
    const targetValue = value * (i.targetPct / 100);
    const diff = targetValue - currentValue;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i.name}</td>
      <td>${currentValue.toFixed(0)} kr</td>
      <td>${currentPct.toFixed(1)}%</td>
      <td>${i.targetPct || 0}%</td>
      <td class="${diff >= 0 ? 'positive' : 'negative'}">
        ${diff.toFixed(0)} kr
      </td>
    `;
    table.appendChild(tr);
  });
}

const investedEl = document.getElementById("invested");
const valueEl = document.getElementById("value");
const profitEl = document.getElementById("profit");
const profitPctEl = document.getElementById("profitPct");
const table = document.getElementById("table");

render();
</script>

</body>
</html>
